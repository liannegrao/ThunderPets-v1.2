<main>
  <!-- Hero Section with Carousel -->
  <section class="hero">
    <div class="carousel-fade">
      <div
        *ngFor="let slide of carouselSlides; let i = index"
        class="slide"
        [ngClass]="{'active': i === currentSlideIndex}"
        [style.background-image]="'url(' + slide + ')'"
      ></div>
    </div>
    <div class="container">
      <h1>Transforme Vidas,<br>Encontre Alegria Duradoura.</h1>
      <p>Na ThunderPets, acreditamos que a adoÃ§Ã£o permanente de um animal Ã© conectar pessoas a parceiros que sÃ£o uma ajuda natural e poderosa no combate Ã  depressÃ£o, solidÃ£o e restaurar a alegria de viver.</p>
      <a href="#adote" class="button button-primary">Quero Adotar e Transformar Minha Vida!</a>
    </div>
  </section>

  <!-- Mission Section -->
  <section class="section container">
    <div id="missao" class="mission section-highlight">
      <div class="section-header">
        <h2>Nossa MissÃ£o</h2>
        <p>Mediar a relaÃ§Ã£o entre doadores e adotantes de cÃ£es e gatos, facilitando adoÃ§Ãµes terapÃªuticas que contribuem para o tratamento da saÃºde emocional tanto das pessoas em sofrimento psÃ­quico quanto dos animais resgatados.</p>
      </div>
      <div class="vision-values-grid">
        <div class="vision-values-item">
          <h3>VisÃ£o</h3>
          <p>Ser a principal plataforma de conexÃ£o entre pessoas que desejam doar ou adotar cÃ£es e gatos, promovendo vÃ­nculos afetivos que fortaleÃ§am a saÃºde emocional dos adotantes e ofereÃ§am aos animais uma vida segura, acolhedora e cheia de afeto. Almejamos tornar-nos referÃªncia em adoÃ§Ã£o responsÃ¡vel, cuidado emocional e bem-estar humano-animal.</p>
        </div>
        <div class="vision-values-item">
          <h3 style="text-align: center; margin-bottom: 1.5rem;">Valores</h3>
          <div class="values-list">
            <div class="value-item">
              <strong>1. Empatia</strong><br>
              <small>Colocamos no centro a compreensÃ£o sensÃ­vel das necessidades emocionais de pessoas e animais.</small>
            </div>
            <div class="value-item">
              <strong>2. Bem-estar Humano-Animal</strong><br>
              <small>Acreditamos na forÃ§a terapÃªutica da conexÃ£o afetiva entre humanos e animais, prezando pelo cuidado e equilÃ­brio de ambos.</small>
            </div>
            <div class="value-item">
              <strong>3. AdoÃ§Ã£o ResponsÃ¡vel</strong><br>
              <small>Promovemos processos transparentes, Ã©ticos e seguros, garantindo que cada adoÃ§Ã£o seja consciente e positiva.</small>
            </div>
            <div class="value-item">
              <strong>4. Acolhimento</strong><br>
              <small>Criamos um ambiente respeitoso e seguro para doadores, adotantes e animais, valorizando histÃ³rias, dores e necessidades individuais.</small>
            </div>
            <div class="value-item">
              <strong>5. Compromisso com a Vida</strong><br>
              <small>Agimos com responsabilidade em cada etapa da mediaÃ§Ã£o, respeitando o valor e a dignidade de todas as vidas envolvidas.</small>
            </div>
            <div class="value-item">
              <strong>6. TransparÃªncia</strong><br>
              <small>Mantemos comunicaÃ§Ã£o clara e honesta, fortalecendo a confianÃ§a entre doadores, adotantes e nossa plataforma.</small>
            </div>
            <div class="value-item">
              <strong>7. ConexÃ£o TerapÃªutica</strong><br>
              <small>Incentivamos laÃ§os afetivos duradouros que contribuam para o cuidado emocional e o bem-estar geral.</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pet Matching Section -->
  <section class="match-section container">
    <div class="match-box">
      <h2>ğŸ’™ Encontre seu Animal Terapeuta Emocional</h2>
      <p>Descreva suas necessidades emocionais e encontraremos o companheiro terapÃªutico ideal para sua jornada de cura!</p>

      <form class="match-form" [formGroup]="matchingForm" (ngSubmit)="onMatchSubmit()">
        <label for="situacao">Qual sua situaÃ§Ã£o emocional atual?</label>
        <select id="situacao" formControlName="situacao" required>
          <option value="">Selecione...</option>
          <option value="depressao">Luto ou DepressÃ£o</option>
          <option value="ansiedade">Ansiedade ou Stress</option>
          <option value="solidao">SolidÃ£o e Isolamento</option>
          <option value="mudanca">Momentos de MudanÃ§a</option>
          <option value="terapia">Suporte TerapÃªutico Adicional</option>
        </select>

        <label for="energia">Que tipo de energia terapÃªutica vocÃª precisa?</label>
        <select id="energia" formControlName="energia" required>
          <option value="">Selecione...</option>
          <option value="calmo-caseiro">Calma e Serenidade</option>
          <option value="moderado">Energia Equilibrada</option>
          <option value="ativo-aventurado">Energia Viva e Motivadora</option>
        </select>

        <label>Sua disponibilidade para interaÃ§Ã£o:</label>
        <div class="companheiros-options">
          <label class="checkbox-label" *ngFor="let option of disponibilidadeOptions">
            <input
              type="checkbox"
              [formControlName]="option.value"
              [value]="option.value"
            >
            <span class="checkmark">{{ option.emoji }}</span>
            {{ option.label }}
          </label>
        </div>

        <button
          type="submit"
          class="button-primary"
          [disabled]="matchingForm.invalid || isMatching"
          id="matchBtn"
        >
          <span *ngIf="!isMatching">ğŸ’š Encontrar meu Terapeuta Emocional!</span>
          <span *ngIf="isMatching">ğŸ” Buscando terapeuta...</span>
        </button>
      </form>

      <!-- Results Section -->
      <div *ngIf="showResults" id="matching-results" style="margin-top: 2rem;">
        <h3 style="margin-bottom: 1rem; color: #14b8a6;">ğŸ’ Terapeutas Emocionais CompatÃ­veis!</h3>

        <!-- Lista de Pets Matched -->
        <div class="pets-matched-grid">
          <div class="pet-match-card" *ngFor="let pet of matchedPets">
            <div class="pet-match-image">
              <!-- Imagem real com fallback -->
              <img
                [ngSrc]="pet.foto_url || '/img/THUNDERPETS (4) (1).png'"
                [alt]="'Foto de ' + pet.nome"
                width="200"
                height="200"
                class="pet-img"
              />
              <div class="pet-status-badge" [ngClass]="getTherapyBadge(pet)">
                {{ getTherapyLabel(pet) }}
              </div>
            </div>

            <div class="pet-match-content">
              <div class="pet-match-header">
                <h3>{{ pet.nome }}</h3>
                <div class="pet-species">{{ pet.especie | titlecase }} â€¢ {{ pet.raca }}</div>
              </div>

              <div class="pet-benefits">
                <span class="benefit-chip">{{ pet.beneficioEmocional }}</span>
              </div>

              <div class="compatibility-scores">
                <div class="score-item" *ngFor="let score of getTopScores(pet)">
                  <span class="score-label">{{ score.label }}</span>
                  <div class="score-bar">
                    <div class="score-fill" [style.width.%]="score.value"></div>
                  </div>
                  <span class="score-value">{{ score.value }}%</span>
                </div>
              </div>

              <p class="pet-description" [innerHTML]="pet.personalidade | slice:0:120"></p>

              <div class="pet-actions">
                <button class="btn-secondary" (click)="openPetDetails(pet)">
                  ğŸ“‹ Ver Detalhes
                </button>
                <button class="btn-primary" (click)="requestAdoption(pet)">
                  â¤ï¸ Solicitar AdoÃ§Ã£o
                </button>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="matchedPets.length === 0" style="text-align: center; padding: 3rem; background: #fef3c7; border-radius: 12px; border: 2px solid #f59e0b; margin-top: 2rem;">
          <p style="color: #92400e; font-weight: bold; font-size: 1.1rem; margin-bottom: 0.5rem;">
            ğŸ˜” Nenhum pet compatÃ­vel encontrado
          </p>
          <p style="color: #78350f; margin: 0;">
            Tente ajustar suas preferÃªncias ou entre em contato conosco para ajuda personalizada.
          </p>
        </div>

        <div *ngIf="hasMoreResults" style="text-align: center; margin-top: 1.5rem;">
          <button
            id="showMoreResults"
            class="button button-primary"
            (click)="onShowMoreResults()"
            style="background: #f97316; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;"
          >
            Ver Mais OpÃ§Ãµes TerapÃªuticas
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Adoption Section -->
  <section id="adote" class="section container">
    <div class="section-header">
      <h2>DisponÃ­veis para AdoÃ§Ã£o</h2>
      <p>Cada animal aqui pode se tornar seu parceiro terapÃªutico permanente. A adoÃ§Ã£o Ã© um compromisso sÃ©rio que gera benefÃ­cios emocionais duradouros para ambos.</p>
    </div>
    <div class="pet-grid">
      <div *ngFor="let pet of showcasedPets" class="pet-card">
        <img [ngSrc]="getLocalImage(pet)" [alt]="'Foto de ' + pet.nome" width="300" height="200" style="object-fit: cover; border-radius: 8px; margin-bottom: 1rem; height: auto;">
        <div class="pet-card-content">
          <h3>{{ pet.nome }}</h3>
          <p><span style="font-weight: 600;">BenefÃ­cio Emocional:</span> {{ pet.beneficioEmocional || 'Companheiro TerapÃªutico' }}<br><span style="font-weight: 600;">Perfil:</span> {{ pet.porte }} â€¢ {{ pet.idade }} meses</p>
          <p>{{ pet.personalidade }}</p>
          <button class="button button-secondary" (click)="adoptPet(pet)">â¤ï¸ Quero Adotar {{ pet.nome }}</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="section container">
    <div id="depoimentos" class="testimonials section-highlight">
      <div class="section-header">
        <h2>TransformaÃ§Ãµes que Mudam Vidas</h2>
        <p>Veja como nossos companheiros terapÃªuticos trouxeram luz aos dias mais difÃ­ceis.</p>
      </div>
      <div class="testimonial-grid" *ngIf="depoimentos.length > 0; else noDepoimentos">
        <div class="testimonial-card" *ngFor="let depoimento of depoimentos">
          <p class="testimonial-text">"{{ depoimento.text }}"</p>
          <div class="testimonial-author">
            <img [src]="depoimento.img" alt="Foto de {{ depoimento.name }}" class="author-img">
            <div>
              <p class="author-name">{{ depoimento.name }}</p>
              <p class="author-info">{{ depoimento.info }}</p>
            </div>
          </div>
        </div>
      </div>
      <ng-template #noDepoimentos>
        <div class="no-testimonials" style="text-align: center; padding: 2rem; background-color: #f7fafc; border-radius: 8px;">
          <p style="margin-bottom: 1rem;">Ainda nÃ£o temos depoimentos. Que tal compartilhar sua histÃ³ria e inspirar outras pessoas?</p>
          <a routerLink="/comentar" class="button button-primary">Deixar meu Depoimento</a>
        </div>
      </ng-template>
    </div>
  </section>

  <!-- Help Section -->
  <section id="ajude" class="section container help-section">
    <h2>Como VocÃª Pode Ajudar</h2>
    <p>Existem vÃ¡rias formas de contribuir com a saÃºde emocional de pessoas e animais. Escolha a modalidade que melhor se adequa Ã s suas possibilidades.</p>
    <div class="help-options">
      <!-- BotÃ£o dinÃ¢mico baseado no tipo de usuÃ¡rio -->
      <a *ngIf="getUserRole() === 'doador'" href="/cadastrar-pet" class="button button-primary">
        ğŸ¾ Sou Doador: Cadastrar Pet
      </a>
      <a *ngIf="getUserRole() === 'mediador'" href="/painel-mediador" class="button button-primary">
        ğŸ›ï¸ Painel Administrativo
      </a>
      <router-link *ngIf="!isUserLoggedIn()" [routerLink]="['/auth']" class="button button-primary">
        ğŸ” FaÃ§a Login para Ajudar
      </router-link>

      <a *ngIf="getUserRole() !== 'mediador'" [routerLink]="isUserLoggedIn() ? '/comentar' : '/auth'" class="button button-secondary">Comentar</a>
      <a [routerLink]="isUserLoggedIn() ? '/painel-adotante' : '/auth'" class="button button-secondary">Adotar um animal</a>
    </div>
  </section>
</main>

<!-- Pet Details Modal -->
<div *ngIf="showPetModal && selectedPet" class="pet-modal-overlay" (click)="onBackdropClick($event)">
  <div class="pet-modal-content">
    <div class="pet-modal-header">
      <h2>ğŸ¾ {{ selectedPet.nome }}</h2>
      <button class="modal-close-btn" (click)="closePetModal()" aria-label="Fechar">âœ•</button>
    </div>

    <div class="pet-modal-body">
      <div class="pet-modal-main">
        <div class="pet-modal-image">
          <img
            [ngSrc]="selectedPet.foto_url || '/img/THUNDERPETS (4) (1).png'"
            [alt]="'Foto de ' + selectedPet.nome"
            width="300"
            height="300"
            style="object-fit: cover; border-radius: 12px; width: 100%; height: 100%;"
          >
        </div>

        <div class="pet-modal-info">
          <div class="pet-info-grid">
            <div class="info-card">
              <h3>ğŸ• Dados BÃ¡sicos</h3>
              <p><strong>RaÃ§a:</strong> {{ selectedPet.raca }}</p>
              <p><strong>Idade:</strong> {{ calcularIdade(selectedPet.idade) }}</p>
              <p><strong>Porte:</strong> {{ capitalize(selectedPet.porte) }}</p>
              <p><strong>Perfil:</strong> {{ capitalize(selectedPet.energia) }}</p>
            </div>

            <div class="info-card">
              <h3>ğŸ’š BenefÃ­cios TerapÃªuticos</h3>
              <p>{{ selectedPet.beneficioEmocional || 'Companheiro terapÃªutico de confianÃ§a e amor incondicional' }}</p>
              <div class="compat-score">
                <h4>Encaixe de Perfil</h4>
                <div *ngFor="let score of getTopScores(selectedPet)" class="score-item">
                  <span>{{ score.label }}:</span>
                  <div class="score-bar">
                    <div class="score-fill" [style.width.%]="score.value"></div>
                  </div>
                  <span>{{ score.value }}%</span>
                </div>
              </div>
            </div>

            <div class="info-card">
              <h3>â¤ï¸ Personalidade</h3>
              <p>{{ selectedPet.personalidade }}</p>
            </div>

            <div class="info-card">
              <h3>ğŸ¥ SaÃºde</h3>
              <p>{{ selectedPet.saude }}</p>
              <h4>Cuidados EspecÃ­ficos</h4>
              <p>{{ selectedPet.cuidados }}</p>
            </div>

            <div class="info-card full-width">
              <h3>ğŸ  Lar Ideal</h3>
              <p>{{ selectedPet.casaIdeal }}</p>
            </div>

            <div class="info-card full-width">
              <h3>ğŸ“– HistÃ³ria</h3>
              <p>{{ selectedPet.historia }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="pet-modal-actions">
        <button class="button-primary" (click)="adoptPet(selectedPet)">
          â¤ï¸ Quero Adotar {{ selectedPet.nome }}
        </button>
        <button class="button-secondary" (click)="closePetModal()">
          âŒ Fechar
        </button>
      </div>
    </div>
  </div>
</div>
