<!-- ===== PAINEL DO ADOTANTE ===== -->
<div class="painel-adotante container">
  <header class="painel-header">
    <h1>ğŸ  Painel do Adotante</h1>
    <p>Encontre o pet perfeito para sua famÃ­lia</p>
  </header>

  <!-- ===== SUAS SOLICITAÃ‡Ã•ES ===== -->
  <section class="solicitacoes-section">
    <div class="solicitacoes-card">
      <h2>ğŸ“‹ Suas SolicitaÃ§Ãµes</h2>
      <div class="solicitacoes-stats">
        <div class="stat-item">
          <span class="stat-number">{{ getSolicitacoesStats().pendentes }}</span>
          <span class="stat-label">Aguardando AprovaÃ§Ã£o</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ getSolicitacoesStats().aprovadas }}</span>
          <span class="stat-label">Aprovadas</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ getSolicitacoesStats().rejeitadas }}</span>
          <span class="stat-label">NÃ£o Aprovadas</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== MEU PERFIL ===== -->
  <section class="perfil-section" *ngIf="isUserLoggedIn()">
    <div class="perfil-card">
      <h2>ğŸ‘¤ Meu Perfil</h2>

      <!-- VisualizaÃ§Ã£o do Perfil -->
      <div *ngIf="!showEditProfile" class="perfil-display">
        <div class="perfil-avatar">
          <img [src]="currentUser?.foto || '/img/THUNDERPETS (4) (1).png'" [alt]="'Foto de ' + currentUser?.nome" class="avatar-img">
        </div>
        <div class="perfil-info">
          <h3>{{ currentUser?.nome }}</h3>
          <p><strong>Email:</strong> {{ currentUser?.email }}</p>
          <p><strong>Telefone:</strong> {{ currentUser?.telefone || 'NÃ£o informado' }}</p>
          <p><strong>Role:</strong> {{ currentUser?.role || 'adotante' }}</p>
        </div>
      </div>

      <!-- FormulÃ¡rio de EdiÃ§Ã£o -->
      <form *ngIf="showEditProfile" [formGroup]="profileForm" class="perfil-edit-form" (ngSubmit)="salvarPerfil()">
        <div class="form-row">
          <div class="form-group">
            <label for="nome">Nome completo *</label>
            <input type="text" id="nome" formControlName="nome" placeholder="Seu nome completo">
          </div>
          <div class="form-group">
            <label for="email">E-mail *</label>
            <input type="email" id="email" formControlName="email" placeholder="seu@email.com">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="telefone">Telefone</label>
            <input type="text" id="telefone" formControlName="telefone" placeholder="(11) 99999-9999">
          </div>
          <div class="form-group">
            <label for="foto">Foto de perfil</label>
            <input type="file" id="foto" (change)="onFileSelected($event)" accept="image/*">
            <small>Selecione uma nova foto (opcional)</small>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary">ğŸ’¾ Salvar AlteraÃ§Ãµes</button>
          <button type="button" class="btn-secondary" (click)="toggleEditProfile()">âŒ Cancelar</button>
        </div>
      </form>

      <button class="btn-edit-profile" (click)="toggleEditProfile()">
        âœï¸ {{ showEditProfile ? 'Cancelar EdiÃ§Ã£o' : 'Editar Perfil' }}
      </button>
    </div>
  </section>

  <!-- ===== PETS DISPONÃVEIS ===== -->
  <section class="pets-disponiveis-section">
    <div class="section-header">
      <h2>â¤ï¸ Pets DisponÃ­veis para AdoÃ§Ã£o</h2>
      <p>ConheÃ§a nossos companheiros que aguardam um novo lar</p>
    </div>

    <!-- Filtros -->
    <div class="filters-section">
      <div class="filters-grid">
        <select class="filter-select" [(ngModel)]="filtroEspecie" (change)="aplicarFiltros()">
          <option value="">Todas as EspÃ©cies</option>
          <option value="cachorro">ğŸ• Cachorros</option>
          <option value="gato">ğŸ± Gatos</option>
          <option value="outros">ğŸ¾ Outros</option>
        </select>

        <select class="filter-select" [(ngModel)]="filtroPorte" (change)="aplicarFiltros()">
          <option value="">Todos os Portes</option>
          <option value="pequeno">Miniatura (atÃ© 5kg)</option>
          <option value="medio">MÃ©dio (5-15kg)</option>
          <option value="grande">Grande (acima 15kg)</option>
        </select>

        <select class="filter-select" [(ngModel)]="filtroEnergia" (change)="aplicarFiltros()">
          <option value="">Todas as Energias</option>
          <option value="baixo">Calmo/Caseiro</option>
          <option value="medio">Moderado/Ativo</option>
          <option value="alto">Hiperativo</option>
        </select>
      </div>
    </div>

    <!-- Lista de Pets -->
    <div class="pets-showcase-grid">
      <div class="pet-showcase-card" *ngFor="let pet of petsFiltrados; let i = index; trackBy: trackByPet">
        <div class="pet-showcase-image">
          <img [src]="pet.foto_url || pet.foto || '/img/THUNDERPETS (4) (1).png'"
               [alt]="'Foto de ' + pet.nome"
               class="pet-image">
          <div class="pet-showcase-overlay">
            <button class="btn-view-details" (click)="openPetDetails(pet)">
              ğŸ“‹ Ver Detalhes
            </button>
            <button class="btn-adopt-now" (click)="requestAdoption(pet)">
              â¤ï¸ Quero Adotar!
            </button>
          </div>
        </div>

        <div class="pet-showcase-content">
          <div class="pet-showcase-header">
            <h3>{{ pet.nome }}</h3>
            <span class="pet-showcase-species">{{ pet.especie | titlecase }} â€¢ {{ pet.raca }}</span>
            <button *ngIf="isUserMediator()" class="btn-delete-pet" (click)="excluirPet($event, pet)" title="Excluir pet (Apenas Mediadores)">
              ğŸ—‘ï¸
            </button>
          </div>

          <div class="pet-showcase-info">
            <span class="pet-info-item">ğŸ“ {{ pet.porte | titlecase }}</span>
            <span class="pet-info-item">âš¡ {{ pet.energia || 'Moderado' }}</span>
            <span class="pet-info-item">ğŸ‚ {{ getFormattedAge(pet.idade) }}</span>
          </div>

          <p class="pet-showcase-description">{{ pet.personalidade | slice:0:100 }}...</p>

          <div class="pet-showcase-benefits">
            <span class="benefit-tag">{{ pet.beneficioEmocional || 'Companheiro Fiel' }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="loading-section" *ngIf="isLoadingPets">
      <div class="loading-spinner">ğŸ”„</div>
      <p>Carregando pets disponÃ­veis...</p>
    </div>

    <div class="empty-section" *ngIf="!isLoadingPets && petsFiltrados.length === 0 && petsDisponiveis.length > 0">
      <div class="empty-icon">ğŸ˜”</div>
      <h3>Nenhum pet encontrado</h3>
      <p>Tente ajustar os filtros ou remover algumas restriÃ§Ãµes.</p>
      <button class="btn-secondary" (click)="limparFiltros()">ğŸ”„ Limpar Filtros</button>
    </div>

    <div class="empty-section" *ngIf="!isLoadingPets && petsDisponiveis.length === 0">
      <div class="empty-icon">ğŸ¾</div>
      <h3>Em breve teremos pets disponÃ­veis</h3>
      <p>Estamos aguardando novos cadastros de doadores. Volte em breve!</p>
    </div>
  </section>

  <!-- Matching TerapÃªutico, Resultados, EstatÃ­sticas continuam iguais -->

</div>

<!-- ===== MODAL CONFIRMAÃ‡ÃƒO DE ADOÃ‡ÃƒO ===== -->
<div class="confirmation-modal-overlay" *ngIf="showConfirmationModal && confirmationPet" (click)="cancelAdoption()">
  <div class="confirmation-modal" (click)="$event.stopPropagation()">
    <div class="modal-header-pet">
      <h2>ğŸ¤” Confirmar SolicitaÃ§Ã£o de AdoÃ§Ã£o</h2>
      <button class="modal-close" (click)="cancelAdoption()">&times;</button>
    </div>

    <div class="modal-body-pet">
      <div class="pet-gallery">
        <img [src]="confirmationPet.foto_url || confirmationPet.foto || '/img/THUNDERPETS (4) (1).png'"
             [alt]="'Foto de ' + confirmationPet.nome"
             class="pet-image-large">
      </div>
      <!-- Resto do modal continua igual -->
    </div>
  </div>
</div>

<!-- ===== MODAL DETALHES PET ===== -->
<div class="pet-modal-overlay" *ngIf="showPetModal && selectedPet" (click)="closePetModal()">
  <div class="pet-modal" (click)="$event.stopPropagation()">
    <div class="modal-header-pet">
      <h2>{{ selectedPet.nome }} - Companheiro Perfeito</h2>
      <button class="modal-close" (click)="closePetModal()">&times;</button>
    </div>

    <div class="modal-body-pet">
      <div class="pet-gallery">
        <img [src]="selectedPet.foto_url || selectedPet.foto || '/img/THUNDERPETS (4) (1).png'"
             [alt]="'Foto de ' + selectedPet.nome"
             class="pet-image-large">
      </div>
      <!-- Resto do modal continua igual -->
    </div>
  </div>
</div>
