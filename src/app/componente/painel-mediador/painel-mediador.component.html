<!-- Header -->
<div class="painel-header">
  <div class="container">
    <div class="header-content">
      <div class="header-text">
        <h1>ğŸ›ï¸ Painel do Mediador</h1>
        <p class="header-subtitle">Gerencie adoÃ§Ãµes, usuÃ¡rios e acompanhe as conexÃµes terapÃªuticas</p>
      </div>
      <div class="header-actions">
        <button class="btn-secondary" (click)="logout()">Sair</button>
      </div>
    </div>
  </div>
</div>

<main class="painel-main">
  <div class="container">

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <button
        class="nav-tab"
        [class.active]="activeTab === 'dashboard'"
        (click)="setActiveTab('dashboard')"
      >
        ğŸ“Š Dashboard
      </button>
      <button
        class="nav-tab"
        [class.active]="activeTab === 'pets'"
        (click)="setActiveTab('pets')"
      >
        ğŸ¾ Gerenciar Pets
      </button>
      <button
        class="nav-tab"
        [class.active]="activeTab === 'usuarios'"
        (click)="setActiveTab('usuarios')"
      >
        ğŸ‘¥ UsuÃ¡rios
      </button>
      <button
        class="nav-tab"
        [class.active]="activeTab === 'relatorios'"
        (click)="setActiveTab('relatorios')"
      >
        ğŸ“ˆ RelatÃ³rios
      </button>
    </div>

    <!-- Dashboard Tab -->
    <div *ngIf="activeTab === 'dashboard'" class="tab-content">
      <!-- Statistics Cards -->
      <div class="stats-grid">
        <div *ngFor="let stat of estatisticas" class="stat-card">
          <div class="stat-icon">{{ stat.icone }}</div>
          <div class="stat-content">
            <h3 class="stat-value" [style.color]="stat.cor">{{ stat.valor }}</h3>
            <p class="stat-title">{{ stat.titulo }}</p>
          </div>
        </div>
      </div>

      <!-- Quick Overview Cards -->
      <div class="overview-grid">
        <div class="overview-card warning">
          <h3>ğŸ“‹ Pets Pendentes</h3>
          <p class="overview-number">{{ getPendingPetsCount() }}</p>
          <p class="overview-desc">Aguardando aprovaÃ§Ã£o</p>
        </div>
        <div class="overview-card success">
          <h3>ğŸ¾ Pets DisponÃ­veis</h3>
          <p class="overview-number">{{ getAvailablePetsCount() }}</p>
          <p class="overview-desc">Prontos para adoÃ§Ã£o</p>
        </div>
        <div class="overview-card info">
          <h3>â¤ï¸ Pets Adotados</h3>
          <p class="overview-number">{{ getAdoptedPetsCount() }}</p>
          <p class="overview-desc">ConexÃµes terapÃªuticas realizadas</p>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="activity-card">
        <h3>ğŸ“± Atividade Recente</h3>
        <div class="activity-list">
          <div class="activity-item">
            <span class="activity-icon">âœ…</span>
            <div class="activity-content">
              <p class="activity-title">Nova adoÃ§Ã£o terapÃªutica</p>
              <p class="activity-desc">JoÃ£o adotou Luna hÃ¡ 2 horas</p>
            </div>
          </div>
          <div class="activity-item">
            <span class="activity-icon">â¤ï¸</span>
            <div class="activity-content">
              <p class="activity-title">AvaliaÃ§Ã£o positiva</p>
              <p class="activity-desc">Maria deu 5 estrelas para Thor</p>
            </div>
          </div>
          <div class="activity-item">
            <span class="activity-icon">ğŸ”„</span>
            <div class="activity-content">
              <p class="activity-title">Pet aprovado</p>
              <p class="activity-desc">Cachorro Buddy agora estÃ¡ disponÃ­vel</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pets Management Tab -->
    <div *ngIf="activeTab === 'pets'" class="tab-content">
      <!-- Pets Summary -->
      <div class="pets-summary">
        <div class="summary-item">
          <h3>ğŸ“‹ Pendentes ({{ getPendingPetsCount() }})</h3>
          <p>Aguardando sua aprovaÃ§Ã£o</p>
        </div>
        <div class="summary-item">
          <h3>ğŸ¾ DisponÃ­veis ({{ getAvailablePetsCount() }})</h3>
          <p>Prontos para adoÃ§Ã£o</p>
        </div>
        <div class="summary-item">
          <h3>â¤ï¸ Adotados ({{ getAdoptedPetsCount() }})</h3>
          <p>ConexÃµes realizadas</p>
        </div>
      </div>

      <!-- Pets Lists -->
      <div class="pets-section">
        <!-- Pending Pets -->
        <div *ngIf="getPendingPetsCount() > 0" class="pets-list">
          <h3>ğŸ”” Pets Aguardando AprovaÃ§Ã£o</h3>
          <div class="pets-grid">
            <div *ngFor="let pet of getPetsPorStatus('pendente')" class="pet-card-mediador">
              <div class="pet-header">
                <img [src]="pet.foto" [alt]="pet.nome" class="pet-foto">
                <div class="pet-info">
                  <h4>{{ pet.nome }}</h4>
                  <p>{{ pet.raca }} â€¢ {{ pet.idade }} meses â€¢ {{ pet.porte }}</p>
                  <p class="pet-doador" *ngIf="pet.doador">ğŸ‘¤ {{ pet.doador.nome }}</p>
                </div>
                <div class="pet-status" [style.background-color]="getStatusColor(pet.status)">
                  {{ getStatusLabel(pet.status) }}
                </div>
              </div>
              <div class="pet-description">
                <p>{{ pet.personalidade }}</p>
              </div>
              <div class="pet-actions">
                <button class="btn-approve" (click)="aprovarPet(pet)">âœ… Aprovar</button>
                <button class="btn-reject" (click)="rejeitarPet(pet)">âŒ Rejeitar</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Available Pets -->
        <div class="pets-list">
          <h3>ğŸ¾ Pets DisponÃ­veis</h3>
          <div class="pets-grid">
            <div *ngFor="let pet of getPetsPorStatus('aprovado')" class="pet-card-mediador">
              <div class="pet-header">
                <img [src]="pet.foto" [alt]="pet.nome" class="pet-foto">
                <div class="pet-info">
                  <h4>{{ pet.nome }}</h4>
                  <p>{{ pet.raca }} â€¢ {{ pet.idade }} meses â€¢ {{ pet.porte }}</p>
                  <p class="pet-doador" *ngIf="pet.doador">ğŸ‘¤ {{ pet.doador.nome }}</p>
                </div>
                <div class="pet-status" [style.background-color]="getStatusColor(pet.status)">
                  {{ getStatusLabel(pet.status) }}
                </div>
              </div>
              <div class="pet-description">
                <p>{{ pet.personalidade }}</p>
              </div>
              <div class="pet-actions">
                <button class="btn-adopt" (click)="marcarComoAdotado(pet)">â¤ï¸ Marcar como Adotado</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Adopted Pets -->
        <div class="pets-list">
          <div class="section-header-with-actions">
            <h3>â¤ï¸ Pets Adotados</h3>
            <button *ngIf="getAdoptedPetsCount() > 0"
                    class="btn-cleanup"
                    (click)="limparPetsAdotados()"
                    title="Limpar/finalizar pets adotados">
              ğŸ§¹ Limpar Pets Adotados
            </button>
          </div>
          <div class="pets-grid">
            <div *ngFor="let pet of getPetsPorStatus('adotado')" class="pet-card-mediador">
              <div class="pet-header">
                <img [src]="pet.foto" [alt]="pet.nome" class="pet-foto">
                <div class="pet-info">
                  <h4>{{ pet.nome }}</h4>
                  <p>{{ pet.raca }} â€¢ {{ pet.idade }} meses â€¢ {{ pet.porte }}</p>
                  <p class="pet-doador" *ngIf="pet.doador">ğŸ‘¤ {{ pet.doador.nome }}</p>
                </div>
                <div class="pet-status" [style.background-color]="getStatusColor(pet.status)">
                  {{ getStatusLabel(pet.status) }}
                </div>
              </div>
              <div class="pet-description">
                <p>{{ pet.personalidade }}</p>
              </div>
            </div>
          </div>
          <div *ngIf="getAdoptedPetsCount() === 0" class="empty-section">
            <div class="empty-icon">ğŸ‰</div>
            <p>Nenhum pet adotado ainda. As adoÃ§Ãµes aparecerÃ£o aqui quando forem realizadas.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Users Management Tab -->
    <div *ngIf="activeTab === 'usuarios'" class="tab-content">
      <!-- Users Summary -->
      <div class="users-summary">
        <div class="summary-item">
          <h3>ğŸ¯ Mediadores</h3>
          <p>{{ getUsuariosPorRole('mediador').length }} usuÃ¡rios</p>
        </div>
        <div class="summary-item">
          <h3>ğŸ¤ VoluntÃ¡rios</h3>
          <p>{{ getUsuariosPorRole('voluntario').length }} usuÃ¡rios</p>
        </div>
        <div class="summary-item">
          <h3>ğŸ¾ Doadores</h3>
          <p>{{ getUsuariosPorRole('doador').length }} usuÃ¡rios</p>
        </div>
      </div>

      <!-- Users Lists -->
      <div class="users-section">
        <!-- Mediadores -->
        <div class="users-list">
          <h3>ğŸ¯ Mediadores</h3>
          <div class="users-grid">
            <div *ngFor="let user of getUsuariosPorRole('mediador')" class="user-card">
              <div class="user-avatar">ğŸ¯</div>
              <div class="user-info">
                <h4>{{ user.nome }}</h4>
                <p>{{ user.email }}</p>
                <p class="user-role">{{ getRoleLabel(user.role) }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- VoluntÃ¡rios -->
        <div class="users-list">
          <h3>ğŸ¤ VoluntÃ¡rios</h3>
          <div class="users-grid">
            <div *ngFor="let user of getUsuariosPorRole('voluntario')" class="user-card">
              <div class="user-avatar">ğŸ¤</div>
              <div class="user-info">
                <h4>{{ user.nome }}</h4>
                <p>{{ user.email }}</p>
                <p class="user-role">{{ getRoleLabel(user.role) }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Doadores -->
        <div class="users-list">
          <h3>ğŸ¾ Doadores</h3>
          <div class="users-grid">
            <div *ngFor="let user of getUsuariosPorRole('doador')" class="user-card">
              <div class="user-avatar">ğŸ¾</div>
              <div class="user-info">
                <h4>{{ user.nome }}</h4>
                <p>{{ user.email }}</p>
                <p class="user-role">{{ getRoleLabel(user.role) }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Reports Tab -->
    <div *ngIf="activeTab === 'relatorios'" class="tab-content">
      <div class="reports-card">
        <h3>ğŸ“Š RelatÃ³rios de AdoÃ§Ãµes</h3>
        <div class="report-stats">
          <div class="report-stat">
            <h4>Total de Pets</h4>
            <p class="stat-number">{{ pets.length }}</p>
          </div>
          <div class="report-stat">
            <h4>Taxa de AdoÃ§Ã£o</h4>
            <p class="stat-number">{{ estatisticas[3].valor }}</p>
          </div>
          <div class="report-stat">
            <h4>UsuÃ¡rios Ativos</h4>
            <p class="stat-number">{{ usuarios.length }}</p>
          </div>
        </div>
        <div class="report-message">
          <p>Funcionalidades avanÃ§adas de relatÃ³rios estarÃ£o disponÃ­veis em versÃµes futuras.</p>
        </div>
      </div>
    </div>

  </div>
</main>
